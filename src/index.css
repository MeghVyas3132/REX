@tailwind base;
@tailwind components;
@tailwind utilities;

/* Pransh Workflow Studio - Professional Design System */

@layer base {
  :root {
    /* Core Background & Surface Colors */
    --background: 217 33% 7%;
    --foreground: 213 27% 92%;
    --surface: 218 30% 9%;
    --surface-elevated: 219 28% 11%;

    /* Animation & Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    --radius: 0.75rem;

    /* Card & Panel Colors */
    --card: 218 30% 9%;
    --card-foreground: 213 27% 92%;

    --popover: 219 28% 11%;
    --popover-foreground: 213 27% 92%;

    /* Brand Colors - Purple/Blue Gradient Theme */
    --primary: 262 83% 58%;
    --primary-foreground: 210 40% 98%;
    --primary-glow: 262 100% 75%;
    --primary-dark: 262 83% 40%;

    --secondary: 221 83% 53%;
    --secondary-foreground: 210 40% 98%;
    --secondary-glow: 221 100% 70%;

    /* UI State Colors */
    --muted: 217 33% 15%;
    --muted-foreground: 215 16% 57%;

    --accent: 262 83% 58%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    /* Borders & Inputs */
    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 262 83% 58%;

    /* Node & Workflow Specific Colors */
    --node-trigger: 142 76% 36%;
    --node-trigger-foreground: 210 40% 98%;
    --node-action: 217 91% 60%;
    --node-action-foreground: 210 40% 98%;
    --node-utility: 39 70% 50%;
    --node-utility-foreground: 210 40% 98%;
    --node-ai: 262 83% 58%;
    --node-ai-foreground: 210 40% 98%;

    /* Workflow Canvas */
    --canvas-background: 217 33% 6%;
    --canvas-grid: 217 33% 12%;
    --connection-line: 262 83% 58%;
    --connection-hover: 262 100% 75%;

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--secondary)));
    --gradient-glow: linear-gradient(135deg, hsl(var(--primary-glow) / 0.3), hsl(var(--secondary-glow) / 0.3));
    --gradient-node: linear-gradient(135deg, hsl(var(--surface-elevated)), hsl(var(--surface)));

    /* Shadows & Effects */
    --shadow-glow: 0 0 40px hsl(var(--primary-glow) / 0.3);
    --shadow-node: 0 4px 20px hsl(217 33% 4% / 0.5);
    --shadow-elevated: 0 8px 32px hsl(217 33% 4% / 0.7);

    /* Animation & Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    --radius: 0.75rem;
  }

  .dark {
    /* Keep same dark theme */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }
}

/* React Flow Customization */
.react-flow {
  background: hsl(var(--canvas-background));
}

.react-flow__background {
  background: hsl(var(--canvas-background));
}

.react-flow__background .react-flow__background-variant-dots {
  fill: hsl(var(--canvas-grid));
  opacity: 0.6;
}

/* React Flow Controls - Enhanced Visibility */
.react-flow-controls {
  background: hsl(var(--surface-elevated)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  padding: 4px !important;
}

.react-flow-controls button {
  background: hsl(var(--surface-elevated)) !important;
  border: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
  width: 32px !important;
  height: 32px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.2s ease !important;
  margin-bottom: 4px !important;
}

.react-flow-controls button:hover {
  background: hsl(var(--primary) / 0.2) !important;
  border-color: hsl(var(--primary)) !important;
  color: hsl(var(--primary-glow)) !important;
  transform: scale(1.05) !important;
}

.react-flow-controls button:active {
  background: hsl(var(--primary) / 0.3) !important;
  transform: scale(0.95) !important;
}

.react-flow-controls button svg {
  width: 16px !important;
  height: 16px !important;
  stroke: hsl(var(--foreground)) !important;
  stroke-width: 2.5px !important;
}

.react-flow-controls button:hover svg {
  stroke: hsl(var(--primary-glow)) !important;
}

.react-flow-controls button:disabled {
  opacity: 0.4 !important;
  cursor: not-allowed !important;
}

.react-flow__edge-path {
  stroke: hsl(var(--connection-line));
  stroke-width: 2px;
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:hover .react-flow__edge-path {
  stroke: hsl(var(--connection-hover));
  filter: drop-shadow(0 0 8px hsl(var(--connection-hover) / 0.5));
}

.react-flow__handle {
  width: 10px;
  height: 10px;
  border: 2px solid hsl(var(--primary));
  background: hsl(var(--background));
  transition: var(--transition-smooth);
}

.react-flow__handle:hover {
  transform: scale(1.2);
  border-color: hsl(var(--primary-glow));
  box-shadow: 0 0 12px hsl(var(--primary-glow) / 0.6);
}

/* Custom Node Styles */
.workflow-node {
  background: var(--gradient-node);
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  box-shadow: var(--shadow-node);
  transition: var(--transition-smooth);
  min-width: 200px;
  padding: 16px;
}

 .workflow-node:hover {
  box-shadow: var(--shadow-elevated);
  border-color: hsl(var(--primary) / 0.5);
}

.workflow-node.selected {
  border-color: hsl(var(--primary));
  box-shadow: var(--shadow-glow);
}


/* Node Categories */
.node-trigger {
  border-left: 4px solid hsl(var(--node-trigger));
}

.node-action {
  border-left: 4px solid hsl(var(--node-action));
}

.node-utility {
  border-left: 4px solid hsl(var(--node-utility));
}

.node-ai {
  border-left: 4px solid hsl(var(--node-ai));
  background: linear-gradient(135deg, hsl(var(--surface-elevated)), hsl(var(--node-ai) / 0.1));
}

/* Sidebar Animations */
.sidebar-enter {
  animation: slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Glowing Effects */
.glow-primary {
  box-shadow: 0 0 20px hsl(var(--primary-glow) / 0.4);
}

.glow-hover:hover {
  filter: drop-shadow(0 0 12px hsl(var(--primary-glow) / 0.6));
  transition: var(--transition-smooth);
}